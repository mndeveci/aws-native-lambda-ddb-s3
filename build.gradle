plugins {
    id 'java'
    id "com.github.johnrengelman.shadow" version "4.0.0"
}

apply plugin:"application"
apply plugin:"java"

group 'com.mndeveci'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenLocal()
    mavenCentral()
    maven { url "https://jcenter.bintray.com" }
}

dependencies {
    compile 'com.amazonaws:aws-lambda-java-core:1.2.0'
    compile 'com.amazonaws:aws-lambda-java-events:1.3.0'

    testCompile group: 'junit', name: 'junit', version: '4.12'
}

task copyResources(type: Copy) {
    from file("$rootProject.projectDir/resources")
    include '*'
    into file("$buildDir/libs")
}
shadowJar.finalizedBy(copyResources)

shadowJar {
    mergeServiceFiles()
}


run.jvmArgs('-noverify', '-XX:TieredStopAtLevel=1')

mainClassName = "com.mndeveci.NativeExecutor"

compileJava.options.compilerArgs += '-parameters'
compileTestJava.options.compilerArgs += '-parameters'
